(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.I?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).greinerHormann=p()})(function(){return function n(k,e,c){function m(b,d){if(!e[b]){if(!k[b]){var h="function"==typeof require&&require;if(!d&&h)return h(b,!0);if(a)return a(b,!0);h=Error("Cannot find module '"+b+"'");throw h.code="MODULE_NOT_FOUND",h;}h=e[b]=
{exports:{}};k[b][0].call(h.exports,function(a){var c=k[b][1][a];return m(c?c:a)},h,h.exports,n,k,e,c)}return e[b].exports}for(var a="function"==typeof require&&require,b=0;b<c.length;b++)m(c[b]);return m}({1:[function(n,k){var e=n("./polygon");k.exports=function(c,m,a,b){c=new e(c);m=new e(m);return c.clip(m,a,b)}},{"./polygon":4}],2:[function(n,k){var e=n("./clip");k.exports={union:function(c,m){return e(c,m,!1,!1)},intersection:function(c,m){return e(c,m,!0,!0)},diff:function(c,m){return e(c,m,
!1,!0)},clip:e}},{"./clip":1}],3:[function(n,k){function e(c,e,a,b){this.h=this.toSource=this.y=this.x=0;var f=(b.y-a.y)*(e.x-c.x)-(b.x-a.x)*(e.y-c.y);0!==f&&(this.toSource=((b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x))/f,this.h=((e.x-c.x)*(c.y-a.y)-(e.y-c.y)*(c.x-a.x))/f,this.valid()&&(this.x=c.x+this.toSource*(e.x-c.x),this.y=c.y+this.toSource*(e.y-c.y)))}e.prototype.valid=function(){return 0<this.toSource&&1>this.toSource&&0<this.h&&1>this.h};e.prototype.F=function(){return 0==this.toSource&&0<=this.h&&
1>=this.h};k.exports=e},{}],4:[function(n,k){function e(a,b){this.o=this.first=null;this.v="undefined"===typeof b?Array.isArray(a[0]):b;for(var f=0,d=a.length;f<d;f++)this.l(new c(a[f]))}var c=n("./vertex"),m=n("./intersection");e.prototype.l=function(a){if(null==this.first)this.first=a,this.first.next=a,this.first.b=a;else{var b=this.first,c=b.b;b.b=a;a.next=b;a.b=c;c.next=a}};e.prototype.A=function(a,b,c){for(;!b.c(c)&&b.m<a.m;)b=b.next;a.next=b;c=b.b;a.b=c;c.next=a;b.b=a};e.prototype.g=function(a){for(;a.a;)a=
a.next;return a};e.prototype.G=function(){var a=this.D||this.first;do{if(a.a&&!a.i)break;a=a.next}while(!a.c(this.first));return this.D=a};e.prototype.H=function(){var a=this.o||this.first;do{if(a.a&&!a.i)return this.o=a,!0;a=a.next}while(!a.c(this.first));this.o=null;return!1};e.prototype.s=function(){var a=[],b=this.first;if(this.v){do a.push([b.x,b.y]),b=b.next;while(b!==this.first)}else{do a.push({x:b.x,y:b.y}),b=b.next;while(b!==this.first)}return a};e.prototype.B=function(){var a=this.first,
b=0;do b+=(a.next.x-a.x)*(a.next.y+a.y);while(!a.c(this.first));return 0>=b};e.prototype.clip=function(a,b,f){var d=this.first,h=a.first,l,g;this.B()||(b=!b);a.B()||(f=!f);do{if(!d.a){do{if(!h.a){g=new m(d,this.g(d.next),h,a.g(h.next));if(g.F()){l=d.b.x-d.x;g=d.b.y-d.y;var k=d.next.x-d.x,n=d.next.y-d.y;n/k===g/l?(l=n,g=-k):(l=k+l,g=n+g);k=Math.sqrt(l*l+g*g);l/=k;g/=k;l*=1E-9;g*=1E-9;(new c(d.x+l,d.y+g)).u(this)?(d.x-=l,d.y-=g):(d.x+=l,d.y+=g);g=new m(d,this.g(d.next),h,a.g(h.next))}g.valid()&&(l=
c.w(g.x,g.y,g.toSource),g=c.w(g.x,g.y,g.h),l.f=g,g.f=l,this.A(l,d,this.g(d.next)),a.A(g,h,a.g(h.next)))}h=h.next}while(!h.c(a.first))}d=d.next}while(!d.c(this.first));d=this.first;h=a.first;l=d.u(a);g=h.u(this);b^=l;f^=g;do d.a&&(d.j=b,b=!b),d=d.next;while(!d.c(this.first));do h.a&&(h.j=f,f=!f),h=h.next;while(!h.c(a.first));for(b=[];this.H();){f=this.G();d=new e([],this.v);d.l(new c(f.x,f.y));do{f.C();if(f.j){do f=f.next,d.l(new c(f.x,f.y));while(!f.a)}else{do f=f.b,d.l(new c(f.x,f.y));while(!f.a)
}f=f.f}while(!f.i);b.push(d.s())}0===b.length&&(l&&b.push(this.s()),g&&b.push(a.s()),0===b.length&&(b=null));return b};k.exports=e},{"./intersection":3,"./vertex":5}],5:[function(n,k){function e(c,e){1===arguments.length&&(Array.isArray(c)?(e=c[1],c=c[0]):(e=c.y,c=c.x));this.x=c;this.y=e;this.f=this.b=this.next=null;this.m=0;this.j=!0;this.i=this.a=!1}e.w=function(c,m,a){c=new e(c,m);c.m=a;c.a=!0;c.j=!1;return c};e.prototype.C=function(){this.i=!0;null===this.f||this.f.i||this.f.C()};e.prototype.c=
function(c){return this.x===c.x&&this.y===c.y};e.prototype.u=function(c){var e=!1,a=c.first,b=a.next,f=this.x,d=this.y;do(a.y<d&&b.y>=d||b.y<d&&a.y>=d)&&(a.x<=f||b.x<=f)&&(e^=a.x+(d-a.y)/(b.y-a.y)*(b.x-a.x)<f),a=a.next,b=a.next||c.first;while(!a.c(c.first));return e};k.exports=e},{}]},{},[2])(2)});
